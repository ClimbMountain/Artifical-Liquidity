## Artificial-Liquidity

Production-ready tools for identifying favorable Polymarket markets, executing cross-wallet chain trades, and logging to SQLite. Behavior preserved from the original scripts with improved structure, typing, logging, and configuration.

### Project Structure

```text
Artificial-Liquidity/
├── settings.py             # Env-driven configuration (supports .env)
├── logging_config.py       # Structured console logging
├── database_manager.py     # SQLite persistence layer
├── market_scan.py          # CLI: scan Polymarket and write cheap_markets.txt
├── cross_fill.py           # CLI: execute chain-trade on a single condition
├── cross_fill_runner.py    # CLI: run cross_fill across active cheap markets
├── db_utils.py             # CLI: DB operations (sessions, details, logs, backup)
├── database_schema.sql     # Full schema (auto-applied if present)
├── streamlit_app.py        # Optional monitoring dashboard
├── wallets.csv             # CSV: private_key,funder
└── cheap_markets.txt       # Generated by market_scan
```

### Requirements

Create a virtual environment and install dependencies:

```bash
python -m venv .venv
. .venv/Scripts/activate  # Windows
pip install -r requirements.txt
```

Minimal `requirements.txt` is provided and avoids unnecessary dependencies.

### Configuration

Settings are loaded from environment variables (and `.env` if present). Common keys:

- `CLOB_HOST` (default: https://clob.polymarket.com)
- `CHAIN_ID` (default: 137)
- `CLOB_SIGNATURE_TYPE` (default: 2)
- `DB_PATH` (default: polyfarm.db)
- `WALLETS_CSV` (default: wallets.csv)
- `CHEAP_MARKETS_FILE` (default: cheap_markets.txt)
- `LOG_LEVEL` (default: INFO)

Create `wallets.csv` with headers `private_key,funder` and at least one row.

### Usage

Scan markets and write `cheap_markets.txt`:

```bash
python market_scan.py --top 50 --out cheap_markets.txt
```

Run chain trading on a condition:

```bash
python cross_fill.py --wallets wallets.csv --condition <condition_id> --iterations 1 --volume 5 --db-path polyfarm.db
```

Orchestrate cross fills for active cheap markets:

```bash
python cross_fill_runner.py --max-retries 1 --min-active 20
``;

Database utilities:

```bash
python db_utils.py sessions --db-path polyfarm.db
python db_utils.py details <session_uuid>
python db_utils.py logs --limit 100
python db_utils.py backup --path backup.db
python db_utils.py vacuum
```

### Tests

Run unit tests:

```bash
pytest -q
```

### Notes

- The first wallet in `wallets.csv` is used by the scanner to authenticate API calls.
- Network calls use simple `requests` with short timeouts and basic retry behavior from the runner.
